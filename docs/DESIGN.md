# 🎮 对战游戏竞猜平台 - MVP 设计文档

## 📋 项目概述

一个现场使用的简易竞猜工具，由管理员统一操作，记录组员的下注并结算积分排名。

### 使用场景
- 现场试玩活动
- 管理员操作电脑，组员口头报下注
- 实时显示排行榜

---

## 🎯 核心功能（仅4个）

### 1. 用户管理
- 管理员添加用户（输入用户名即可）
- 新用户自动获得 1000 初始积分
- 可查看用户列表和积分

### 2. 创建竞猜
- 输入竞猜标题（如：第3关 - 火焰魔王）
- 添加竞猜选项（如：胜利、失败）
- 为每个选项设置赔率

### 3. 记录下注
- 选择用户
- 选择下注选项
- 输入下注积分
- 确认（扣除用户积分）

### 4. 结算 & 排行榜
- 选择本轮正确结果
- 系统自动计算并发放奖励
- 实时更新积分排行榜

---

## 🔄 操作流程

```
┌──────────────────────────────────────────────────────────┐
│                      活动开始前                          │
│  管理员添加所有参与者 → 每人获得 1000 初始积分            │
└──────────────────────────────────────────────────────────┘
                            │
                            ▼
┌──────────────────────────────────────────────────────────┐
│                      每轮对战                            │
│                                                          │
│  1. 创建竞猜（设置选项和赔率）                            │
│                 ↓                                        │
│  2. 组员口头报下注，管理员录入                            │
│                 ↓                                        │
│  3. 对战开始（停止接受下注）                              │
│                 ↓                                        │
│  4. 对战结束，管理员选择结果进行结算                      │
│                 ↓                                        │
│  5. 查看排行榜，进入下一轮                               │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

---

## 📊 数据模型（简化版）

### 用户表 (users)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | INT | 主键 |
| name | VARCHAR | 用户名 |
| balance | INT | 当前积分（初始1000） |

### 竞猜表 (bets)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | INT | 主键 |
| title | VARCHAR | 竞猜标题 |
| status | ENUM | open / settled |
| result_option_id | INT | 结果选项ID |

### 竞猜选项表 (bet_options)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | INT | 主键 |
| bet_id | INT | 关联竞猜 |
| name | VARCHAR | 选项名称 |
| odds | DECIMAL | 赔率 |

### 下注记录表 (wagers)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | INT | 主键 |
| user_id | INT | 用户ID |
| bet_id | INT | 竞猜ID |
| option_id | INT | 选项ID |
| amount | INT | 下注积分 |
| odds_at_bet | DECIMAL | 下注时赔率 |
| payout | INT | 结算金额 |

---

## 🖥️ 页面设计（单页应用）

### 主界面布局

```
┌─────────────────────────────────────────────────────────────┐
│  🎮 对战竞猜平台                              [添加用户]     │
├─────────────────────────────────┬───────────────────────────┤
│                                 │                           │
│      当前竞猜区域               │       排行榜              │
│                                 │                           │
│  ┌───────────────────────┐      │   1. 张三    1250 分      │
│  │ 第3关 - 火焰魔王      │      │   2. 李四    1100 分      │
│  │                       │      │   3. 王五    950 分       │
│  │  [胜利 x1.5]  [失败 x2.0]    │   4. 赵六    800 分       │
│  │                       │      │   ...                     │
│  └───────────────────────┘      │                           │
│                                 │                           │
│  ┌───────────────────────┐      │                           │
│  │ 录入下注              │      │                           │
│  │ 用户: [下拉选择]      │      │                           │
│  │ 选项: [下拉选择]      │      │                           │
│  │ 积分: [____] [确认]   │      │                           │
│  └───────────────────────┘      │                           │
│                                 │                           │
│  本轮下注列表:                  │                           │
│  - 张三: 胜利 100分             │                           │
│  - 李四: 失败 200分             │                           │
│                                 │                           │
├─────────────────────────────────┴───────────────────────────┤
│  [新建竞猜]     [结算: 选择结果 ▼]     [重置所有积分]        │
└─────────────────────────────────────────────────────────────┘
```

### 功能区说明

| 区域 | 功能 |
|------|------|
| 顶部 | 标题 + 添加用户按钮 |
| 左侧主区 | 当前竞猜信息 + 下注录入表单 + 本轮下注列表 |
| 右侧 | 实时积分排行榜 |
| 底部 | 操作按钮：新建竞猜、结算、重置积分 |

---

## 🛠️ 技术方案（极简）

### 方案 A：纯前端（推荐）
- **技术**: HTML + CSS + JavaScript
- **存储**: LocalStorage（浏览器本地存储）
- **优点**: 无需后端，打开即用
- **缺点**: 数据仅存于单台电脑

### 方案 B：前后端分离
- **前端**: React + Tailwind CSS
- **后端**: Node.js + Express + SQLite
- **优点**: 可多端访问，数据持久化
- **缺点**: 需要部署

**建议先用方案 A 快速实现 MVP，现场验证后再考虑扩展。**

---

## ✅ 开发清单

- [ ] 用户管理（添加用户、显示列表）
- [ ] 创建竞猜（标题、选项、赔率）
- [ ] 录入下注（选用户、选选项、输积分）
- [ ] 结算功能（选结果、自动计算）
- [ ] 排行榜显示
- [ ] 数据本地存储

---

## 📝 积分规则

```
初始积分: 1000

下注扣除: 下注时立即扣除积分
获奖计算: 下注金额 × 赔率
净收益:   获奖金额 - 下注金额

示例:
- 用户下注 100 分，选「胜利」，赔率 1.5
- 结果为「胜利」
- 获得: 100 × 1.5 = 150 分
- 净赚: 50 分
```

---

## 🚀 快速开始

完成后的使用流程：

1. 打开网页
2. 添加所有参与者
3. 创建第一关竞猜，设置选项和赔率
4. 组员口头报下注，管理员录入
5. 对战结束后，点击结算并选择正确结果
6. 查看排行榜，继续下一关
